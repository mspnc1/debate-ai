const fs = require('fs');
const path = require('path');

// Create a proper PNG image (8x8 red square)
// This is a valid PNG with proper headers
const pngBuffer = Buffer.from([
  0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a,  // PNG signature
  0x00, 0x00, 0x00, 0x0d, 0x49, 0x48, 0x44, 0x52,  // IHDR chunk
  0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x08,  // 8x8 dimensions
  0x08, 0x02, 0x00, 0x00, 0x00, 0x4b, 0x6d, 0x29,  
  0xdc, 0x00, 0x00, 0x00, 0x1c, 0x49, 0x44, 0x41,  // IDAT chunk
  0x54, 0x78, 0x9c, 0x62, 0xf8, 0xcf, 0xc0, 0xc0,
  0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0,
  0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0x00,
  0x00, 0x00, 0x31, 0x00, 0x01, 0xd7, 0x21, 0xc4,
  0x12, 0x00, 0x00, 0x00, 0x00, 0x49, 0x45, 0x4e,  // IEND chunk
  0x44, 0xae, 0x42, 0x60, 0x82
]);

fs.writeFileSync(path.join(__dirname, 'test-image.png'), pngBuffer);
console.log('Created test-image.png');

// Also try with a base64 encoded JPEG from a known working source
// This is a 1x1 white pixel JPEG
const jpegBase64 = '/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCwAA8A/9k=';

fs.writeFileSync(
  path.join(__dirname, 'test-image-white.jpg'), 
  Buffer.from(jpegBase64, 'base64')
);
console.log('Created test-image-white.jpg');

console.log('Proper test images created!');